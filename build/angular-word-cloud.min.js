/*! angular-word-cloud 2014-07-02 */
angular.module("vr.directives.wordCloud",[]).directive("wordCloud",["$interpolate",function(a){return{restrict:"EA",replace:!0,transclude:!0,scope:{words:"=",sort:"@"},template:"<div class='word-cloud-group'><span class='word-cloud-group-item' ng-repeat='word in mywords | orderBy:param:reverse' ng-transclude></span></div>",controller:["$scope","$transclude",function(a,b){a.initClick=function(c){b(function(b,d){a.clickFn=d[c]})}}],compile:function(b,c){var d=angular.isUndefined(c.type)?"list":c.type;switch(d){case"cloud":b.children().eq(0).attr("style","font-size: "+a.startSymbol()+" fontSize(word.size) "+a.endSymbol()+";font-weight: "+a.startSymbol()+" fontWeight(word) "+a.endSymbol()+";");break;case"list":}return function(a,b,c){function d(a){for(var b={},c=[],d=0;d<a.length;++d)b.hasOwnProperty(a[d])||(c.push(a[d]),b[a[d]]=1);return c}a.clickFn=function(){},angular.isUndefined(c.ngClick)||a.initClick(c.ngClick);var e=function(){var b=angular.copy(a.words);angular.isArray(b)&&b.length>0?angular.isObject(b[0])?(angular.isUndefined(b[0].word)||angular.isUndefined(b[0].size))&&(b=[]):b=b.map(function(a){return{word:a,size:1}}):b=[];var c=b.reduce(function(a,b){return a.size<b.size?a:b}).size,e=b.reduce(function(a,b){return a.size>b.size?a:b}).size,f=d(b.map(function(a){return a.size.toString()})).length;b=b.map(function(a){return{word:a.word,size:a.size,rawSize:parseFloat(a.size),min:c,max:e,uniqueCount:f}}),a.mywords=b};a.fontSize=function(a){return-1==(""+a).search("(px|em|in|cm|mm|ex|pt|pc|%)+")?a+"em":a},a.fontWeight=function(a){for(var b=(a.max-a.min)/(a.uniqueCount<9?a.uniqueCount:9),c=0;10>c;c++)if(a.size<b*c)return 100*c;return 900},a.$watch("words",function(){e()},!0),a.$watch("sort",function(b){b||(b="no"),a.param="alpha"==b.substr(0,5)?"word":"no"==b?"":"rawSize",a.reverse="desc"==b.substr(-4).toLowerCase()})}}}}]);